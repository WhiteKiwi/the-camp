import { readFileSync } from 'fs';
import { join } from 'path';

import { parseSoldiers } from './parse-soldiers';

describe('parseSoldiers', () => {
	it('성공', () => {
		const data = readFileSync(join(__dirname, 'test/성공.txt'), 'utf-8');

		expect(parseSoldiers({ data } as any)).toEqual([
			{
				hasCafe: true,
				입영부대Code: '20020191700',
				입영부대EduId: '6506',
				군인Code: '6142000',
				입영일: '2021-03-02',
				생년월일yyyyMMdd_CanBeEncoded: '20010928',
				이름: '김민석',
			},
			{
				hasCafe: true,
				입영부대Code: '20121190200',
				입영부대EduId: '6611',
				군인Code: '3051000',
				입영일: '2021-03-29',
				생년월일yyyyMMdd_CanBeEncoded: '20010822',
				이름: '이예건',
			},
			{
				hasCafe: true,
				입영부대Code: '20220280600',
				입영부대EduId: '6629',
				군인Code: '2050000',
				입영일: '2021-04-06',
				생년월일yyyyMMdd_CanBeEncoded: '20010814',
				이름: '이지원',
			},
			{
				hasCafe: true,
				입영부대Code: '20020191700',
				입영부대EduId: '6698',
				군인Code: '6142000',
				입영일: '2021-04-26',
				생년월일yyyyMMdd_CanBeEncoded: '20010405',
				이름: '김민수',
			},
			{
				hasCafe: true,
				입영부대Code: '20220280100',
				입영부대EduId: '12117',
				군인Code: '2031000',
				입영일: '2022-01-25',
				생년월일yyyyMMdd_CanBeEncoded: '20011020',
				이름: '김명훈',
			},
			{
				hasCafe: true,
				입영부대Code: '20020191700',
				입영부대EduId: '14030',
				군인Code: '6142000',
				입영일: '2022-02-14',
				생년월일yyyyMMdd_CanBeEncoded: '20011126',
				이름: '이상택',
			},
			{
				hasCafe: false,
				정렬번호: '9',
				이름: '이상택',
				입영일: '2022-02-14',
				생년월일yyyyMMdd_CanBeEncoded: '08IyuIy6/tXS/vveGiNc+Q==',
				입영부대TypeCode: '',
				입영부대Code: '',
				군종Code: '0000010001',
				관계Code: '0000420006',
			},
			{
				hasCafe: false,
				정렬번호: '10',
				이름: '이상태',
				입영일: '2022-02-14',
				생년월일yyyyMMdd_CanBeEncoded: '08IyuIy6/tXS/vveGiNc+Q==',
				입영부대TypeCode: '',
				입영부대Code: '',
				군종Code: '0000010001',
				관계Code: '0000420006',
			},
			{
				hasCafe: false,
				정렬번호: '11',
				이름: '이상택',
				입영일: '2022-02-13',
				생년월일yyyyMMdd_CanBeEncoded: '20011126',
				입영부대TypeCode: '0000140001',
				입영부대Code: '20020191700',
				군종Code: '0000010001',
				관계Code: '0000420007',
			},
			{
				hasCafe: false,
				정렬번호: '12',
				이름: '이상택',
				입영일: '2022-02-14',
				생년월일yyyyMMdd_CanBeEncoded: '20011126',
				입영부대TypeCode: '',
				입영부대Code: 'undefined',
				군종Code: '0000010001',
				관계Code: '0000420007',
			},
			{
				hasCafe: false,
				정렬번호: '13',
				이름: '이상가',
				입영일: '2022-02-14',
				생년월일yyyyMMdd_CanBeEncoded: '20011126',
				입영부대TypeCode: '0000140001',
				입영부대Code: '20020191700',
				군종Code: '0000010001',
				관계Code: '0000420007',
			},
			{
				hasCafe: false,
				정렬번호: '14',
				이름: '이상나',
				입영일: '2022-02-14',
				생년월일yyyyMMdd_CanBeEncoded: '20011126',
				입영부대TypeCode: '0000140001',
				입영부대Code: '20020191700',
				군종Code: '0000010001',
				관계Code: '0000420007',
			},
			{
				hasCafe: false,
				정렬번호: '15',
				이름: '이상다',
				입영일: '2022-02-14',
				생년월일yyyyMMdd_CanBeEncoded: '20011126',
				입영부대TypeCode: '0000140001',
				입영부대Code: '20020191700',
				군종Code: '0000010001',
				관계Code: '0000420007',
			},
			{
				hasCafe: false,
				정렬번호: '16',
				이름: '이상라',
				입영일: '2022-02-14',
				생년월일yyyyMMdd_CanBeEncoded: '20011126',
				입영부대TypeCode: '0000140001',
				입영부대Code: '20020191700',
				군종Code: '0000010001',
				관계Code: '0000420007',
			},
			{
				hasCafe: false,
				정렬번호: '17',
				이름: '이상마',
				입영일: '2022-02-14',
				생년월일yyyyMMdd_CanBeEncoded: '20011126',
				입영부대TypeCode: '0000140001',
				입영부대Code: '20020191700',
				군종Code: '0000010001',
				관계Code: '0000420007',
			},
			{
				hasCafe: false,
				정렬번호: '18',
				이름: '이상바',
				입영일: '2022-02-14',
				생년월일yyyyMMdd_CanBeEncoded: '20011126',
				입영부대TypeCode: '0000140001',
				입영부대Code: '20020191700',
				군종Code: '0000010001',
				관계Code: '0000420007',
			},
		]);
	});
});
